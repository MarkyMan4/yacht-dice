import"./style.c0ed6924.js";let y=sessionStorage.getItem("roomId"),r=sessionStorage.getItem("nickname"),t="",m=!1,g=document.getElementById("roll-btn"),i=new WebSocket(`ws://144.202.59.75:8000/ws/${y}`);i.onmessage=e=>{let n=JSON.parse(e.data);m||(f(n),m=!0),I(n),h(n),E(n),g.disabled=n.turn!==t||n.rollsLeft<=0,n.turn===t&&n.rollsLeft<3?B(n.scoreCard[t]):$()};i.onopen=e=>{i.send(JSON.stringify({eventType:"name",payload:{name:r}}))};g.addEventListener("click",()=>{let e={eventType:"roll"};i.send(JSON.stringify(e))});function f(e){document.getElementById("waiting-text")&&document.getElementById("waiting-text").remove(),document.getElementById("game").style.visibility="visible",t=e.p1.nickname===r?"p1":"p2",document.getElementById("you-title").innerHTML=`You are ${t}`,document.getElementById("p1-head").innerHTML=`p1<br>${e.p1.nickname}`,document.getElementById("p2-head").innerHTML=`p2<br>${e.p2.nickname}`}function I(e){u("p1",e.scoreCard.p1),u("p2",e.scoreCard.p2)}function u(e,n){n.isAcesScore?(document.getElementById(`${e}-aces`).innerHTML=n.aces,document.getElementById(`${e}-aces`).className="scored-cell"):document.getElementById(`${e}-aces`).innerHTML="",n.isDeucesScore?(document.getElementById(`${e}-deuces`).innerHTML=n.deuces,document.getElementById(`${e}-deuces`).className="scored-cell"):document.getElementById(`${e}-deuces`).innerHTML="",n.isThreesScore?(document.getElementById(`${e}-threes`).innerHTML=n.threes,document.getElementById(`${e}-threes`).className="scored-cell"):document.getElementById(`${e}-threes`).innerHTML="",n.isFoursScore?(document.getElementById(`${e}-fours`).innerHTML=n.fours,document.getElementById(`${e}-fours`).className="scored-cell"):document.getElementById(`${e}-fours`).innerHTML="",n.isFivesScore?(document.getElementById(`${e}-fives`).innerHTML=n.fives,document.getElementById(`${e}-fives`).className="scored-cell"):document.getElementById(`${e}-fives`).innerHTML="",n.isSixesScore?(document.getElementById(`${e}-sixes`).innerHTML=n.sixes,document.getElementById(`${e}-sixes`).className="scored-cell"):document.getElementById(`${e}-sixes`).innerHTML="",n.isFourOfAKindScore?(document.getElementById(`${e}-fourOfAKind`).innerHTML=n.fourOfAKind,document.getElementById(`${e}-fourOfAKind`).className="scored-cell"):document.getElementById(`${e}-fourOfAKind`).innerHTML="",n.isFullHouseScore?(document.getElementById(`${e}-fullHouse`).innerHTML=n.fullHouse,document.getElementById(`${e}-fullHouse`).className="scored-cell"):document.getElementById(`${e}-fullHouse`).innerHTML="",n.isSmallStraightScore?(document.getElementById(`${e}-smallStraight`).innerHTML=n.smallStraight,document.getElementById(`${e}-smallStraight`).className="scored-cell"):document.getElementById(`${e}-smallStraight`).innerHTML="",n.isLargeStraightScore?(document.getElementById(`${e}-largeStraight`).innerHTML=n.largeStraight,document.getElementById(`${e}-largeStraight`).className="scored-cell"):document.getElementById(`${e}-largeStraight`).innerHTML="",n.isChanceScore?(document.getElementById(`${e}-chance`).innerHTML=n.chance,document.getElementById(`${e}-chance`).className="scored-cell"):document.getElementById(`${e}-chance`).innerHTML="",n.isYachtScore?(document.getElementById(`${e}-yacht`).innerHTML=n.yacht,document.getElementById(`${e}-yacht`).className="scored-cell"):document.getElementById(`${e}-yacht`).innerHTML=""}function E(e){Object.keys(e.scoreHints).forEach(n=>{document.getElementById(`${e.turn}-${n}`).innerHTML=e.scoreHints[n]})}function B(e){e.isAcesScore||(document.getElementById(`${t}-aces`).onclick=c,document.getElementById(`${t}-aces`).style.cursor="pointer"),e.isDeucesScore||(document.getElementById(`${t}-deuces`).onclick=c,document.getElementById(`${t}-deuces`).style.cursor="pointer"),e.isThreesScore||(document.getElementById(`${t}-threes`).onclick=c,document.getElementById(`${t}-threes`).style.cursor="pointer"),e.isFoursScore||(document.getElementById(`${t}-fours`).onclick=c,document.getElementById(`${t}-fours`).style.cursor="pointer"),e.isFivesScore||(document.getElementById(`${t}-fives`).onclick=c,document.getElementById(`${t}-fives`).style.cursor="pointer"),e.isSixesScore||(document.getElementById(`${t}-sixes`).onclick=c,document.getElementById(`${t}-sixes`).style.cursor="pointer"),e.isFourOfAKindScore||(document.getElementById(`${t}-fourOfAKind`).onclick=c,document.getElementById(`${t}-fourOfAKind`).style.cursor="pointer"),e.isFullHouseScore||(document.getElementById(`${t}-fullHouse`).onclick=c,document.getElementById(`${t}-fullHouse`).style.cursor="pointer"),e.isSmallStraightScore||(document.getElementById(`${t}-smallStraight`).onclick=c,document.getElementById(`${t}-smallStraight`).style.cursor="pointer"),e.isLargeStraightScore||(document.getElementById(`${t}-largeStraight`).onclick=c,document.getElementById(`${t}-largeStraight`).style.cursor="pointer"),e.isChanceScore||(document.getElementById(`${t}-chance`).onclick=c,document.getElementById(`${t}-chance`).style.cursor="pointer"),e.isYachtScore||(document.getElementById(`${t}-yacht`).onclick=c,document.getElementById(`${t}-yacht`).style.cursor="pointer")}function $(){document.getElementById(`${t}-aces`).onclick=null,document.getElementById(`${t}-aces`).style.cursor="default",document.getElementById(`${t}-deuces`).onclick=null,document.getElementById(`${t}-deuces`).style.cursor="default",document.getElementById(`${t}-threes`).onclick=null,document.getElementById(`${t}-threes`).style.cursor="default",document.getElementById(`${t}-fours`).onclick=null,document.getElementById(`${t}-fours`).style.cursor="default",document.getElementById(`${t}-fives`).onclick=null,document.getElementById(`${t}-fives`).style.cursor="default",document.getElementById(`${t}-sixes`).onclick=null,document.getElementById(`${t}-sixes`).style.cursor="default",document.getElementById(`${t}-fourOfAKind`).onclick=null,document.getElementById(`${t}-fourOfAKind`).style.cursor="default",document.getElementById(`${t}-fullHouse`).onclick=null,document.getElementById(`${t}-fullHouse`).style.cursor="default",document.getElementById(`${t}-smallStraight`).onclick=null,document.getElementById(`${t}-smallStraight`).style.cursor="default",document.getElementById(`${t}-largeStraight`).onclick=null,document.getElementById(`${t}-largeStraight`).style.cursor="default",document.getElementById(`${t}-chance`).onclick=null,document.getElementById(`${t}-chance`).style.cursor="default",document.getElementById(`${t}-yacht`).onclick=null,document.getElementById(`${t}-yacht`).style.cursor="default"}function c(e){let n=e.target.id.split("-"),l={eventType:"score",payload:{category:n[n.length-1]}};i.send(JSON.stringify(l))}function a(e){let n=e.target.id.split("-"),l={eventType:"keep",payload:{die:parseInt(n[n.length-1])}};i.send(JSON.stringify(l))}function S(e){let n=e.target.id.split("-"),l={eventType:"unkeep",payload:{die:parseInt(n[n.length-1])}};i.send(JSON.stringify(l))}function h(e){let n="";for(let l=0;l<e.diceInPlay.length;l++){let o=e.diceInPlay[l];n+=`<div id="die-in-play-${l}" class="die-in-play">${o}</div>`}document.getElementById("dice-in-play").innerHTML=n;let d="";for(let l=0;l<e.diceKept.length;l++){let o=e.diceKept[l];d+=`<div id="die-kept-${l}" class="die-kept">${o}</div>`}if(document.getElementById("dice-kept").innerHTML=d,!(e.rollsLeft>=3)&&e.turn===t){let l=document.getElementsByClassName("die-in-play");for(let s of l)s.addEventListener("click",a);let o=document.getElementsByClassName("die-kept");for(let s of o)s.addEventListener("click",S)}}
